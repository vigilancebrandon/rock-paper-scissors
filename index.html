<!--
Make a game that plays rock paper scissors against the computer in console.
Player inputs "Rock", "Paper", or "Scissors"
Computer makes selection upon input
  Pass selections to winner function
  Determine winner
Print selections
Print winner

Rock, Rock
Rock, Paper
Rock, Scissors

Paper, Paper
Paper, Rock
Paper, Scissors

Scissors, Scissors
Scissors, Rock
Scissors, Paper
-->
<!DOCTYPE html>
<html lang="en">
  <meta charset="UTF-8">
  <title>Rock Paper Scissors</title>
  <body>
    <button id="rock">Rock</button>
    <button id="paper">Paper</button>
    <button id="scissors">Scissors</button>
    <div>
      <p id="round-results"></p>
      <div id="game-results">
        <p id="computer-wins"></p>
        <p id="player-wins"></p>
        <p id="ties"></p>
        <p id="#final-result"></p>
      </div>
    </div>
    <script>
      let roundResults = document.querySelector('#round-results');
      //let gameResults = document.querySelector('#game-results'); //could be useful to have this div for later styling
      let computerWinsDisplay = document.querySelector('#computer-wins');
      let playerWinsDisplay = document.querySelector('#player-wins');
      let tiesDisplay = document.querySelector('#ties');
      let finalResult = document.querySelector('#final-result');

      let computerWins = 0;
      let playerWins = 0;
      let ties = 0;
      
      computerWinsDisplay.textContent = "Computer: 0";
      playerWinsDisplay.textContent = "Player: 0";
      tiesDisplay.textContent = "Ties: 0";

      function getComputerChoice() {
        let computer = Math.floor(Math.random() * 3)
        if (computer === 0) {
          computer = "rock";
        } else if (computer === 1) {
          computer = "paper";
        } else if (computer === 2) {
          computer = "scissors";
        }
        return computer;
      }

      function playRound(player) {
          computer = getComputerChoice();
          if (computer === player) {
            roundResults.textContent = `It's a tie! You both played ${computer}.\nLet's try again!`;
            ties++;
            tiesDisplay.textContent = `Ties: ${ties}`;
            playRound();
          } else {
            determineWinner(computer, player);
          };
          if (computerWins === 5) {
            finalResult.textContent = `Computer wins the game, ${computerWins} to ${playerWins}!`;
            reset();
          } else if (playerWins === 5) {
            finalResult.textContent = `Player wins the game, ${playerWins} to ${computerWins}!`;
            reset();
          };
        }

      function determineWinner(computer, player) {
        if (
          (computer === "rock" && player === "scissors") 
          || (computer === "paper" && player === "rock")
          || (computer === "scissors" && player === "paper")
          ) {
            return "computer";
        } else if (
          (player === "rock" && computer === "scissors")
          || (player === "paper" && computer === "rock")
          || (player === "scissors" && computer === "paper")
          ) {
            return "player";
        }
      }

      function updateScore(winner) {
        if (winner === 'computer') {
          computerWins++;
        } else if (winner === 'player') {
          playerWins++;
        }
      }

      function updateResults(winner) {
        if (winner === 'computer') {
          roundResults.textContent = `You lose the round! ${computer} beats ${player}`;
          computerWinsDisplay.textContent = `Computer: ${computerWins}`;
        } else if (winner === 'player') {
          roundResults.textContent = `You win the round! ${player} beats ${computer}`;
          playerWinsDisplay.textContent = `Player: ${playerWins}`;
        }
      }


      function reset() {
        computerWins = 0;
        playerWins = 0;
        ties = 0;
        computerWinsDisplay.textContent = "Computer: 0";
        playerWinsDisplay.textContent = "Player: 0";
        tiesDisplay.textContent = "Ties: 0";
      }


        let rockButton = document.querySelector('#rock');
        let paperButton = document.querySelector('#paper');
        let scissorsButton = document.querySelector('#scissors');

        //replace this with event delegation?
        window.addEventListener('click', (event) => {
          playRound(event.target.id);
        });

        /*function game() {
          let compWins = 0;
          let playerWins = 0;
          /while (compWins + playerWins < 5) {
            if (playRound() === 'computer') {
              compWins++;
            } else {
              playerWins++;
            }
            if (compWins === 3) {
              console.log(`You lose the game, ${compWins} to ${playerWins}!`);
              break
            } else if (playerWins === 3) {
              console.log(`You win the game, ${playerWins} to ${compWins}!`);
              break
            }
          }
        }*/
    </script>
  </body>
</html>